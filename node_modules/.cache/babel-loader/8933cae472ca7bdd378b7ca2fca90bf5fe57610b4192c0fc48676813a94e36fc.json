{"ast":null,"code":"import _objectSpread from\"/home/rodolphe/Data/Rojo/sujet/front-office/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/rodolphe/Data/Rojo/sujet/front-office/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Brand from\"../components/Brand\";import{useForm}from\"react-hook-form\";import React,{useEffect,useState}from\"react\";import{ajouterAuction}from\"../services/EnchereService\";import{getAllCategories}from\"../services/CategoriesService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AddAuction(){var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),press=_useState2[0],isPress=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),client=_useState6[0],setClient=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];useEffect(function(){var cl=JSON.parse(sessionStorage.getItem(\"client\"));if(!cl){window.location.href=\"/\";}setClient(cl);getAllCategories().then(function(res){setCategories(res.data);});},[]);function submit(data){isPress(true);data.idClient=client.id;data.duree=data.duree+\":00\";ajouterAuction(data).then(function(res){setMessage(res.data.message);isPress(false);});}if(!categories){return/*#__PURE__*/_jsx(\"div\",{className:\"preloader\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Brand,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Ajouter Ench\\xE8re\"})}),message?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",role:\"alert\",children:message}):\"\",/*#__PURE__*/_jsxs(\"form\",{className:\"w-100\",onSubmit:handleSubmit(submit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Produit\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"produit\")),{},{type:\"text\",placeholder:\"Entrer le nom du produit\"}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Prix min\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"prixMin\")),{},{type:\"number\",step:\"any\",placeholder:\"Entrer le prix du produit\"}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Categories\"}),/*#__PURE__*/_jsx(\"select\",_objectSpread(_objectSpread({},register(\"idCategorie\")),{},{className:\"nice-select\",children:categories.map(function(cat){return/*#__PURE__*/_jsx(\"option\",{value:cat.id,className:\"option\",children:cat.categorie},cat.id);})}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Durre\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"duree\")),{},{type:\"time\",placeholder:\"Entrer le nom du produit\"}))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register(\"description\")),{},{type:\"text\",placeholder:\"Entrer le nom du produit\"}))]})})]}),/*#__PURE__*/_jsxs(\"button\",{className:!press?\"account-btn\":\"disable-btn\",disabled:press,children:[press?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",style:{\"color\":\"#494949\"},children:\" \"}):\"\",\"enregistrer\"]})]})]})})})]});}}","map":{"version":3,"names":["Brand","useForm","React","useEffect","useState","ajouterAuction","getAllCategories","AddAuction","handleSubmit","register","press","isPress","message","setMessage","client","setClient","categories","setCategories","cl","JSON","parse","sessionStorage","getItem","window","location","href","then","res","data","submit","idClient","id","duree","map","cat","categorie"],"sources":["/home/rodolphe/Data/Rojo/sujet/front-office/src/pages/AddAuction.js"],"sourcesContent":["import Brand from \"../components/Brand\";\nimport {useForm} from \"react-hook-form\";\nimport React, {useEffect, useState} from \"react\";\nimport {ajouterAuction} from \"../services/EnchereService\";\nimport {getAllCategories} from \"../services/CategoriesService\";\n\nexport default function AddAuction(){\n    const{handleSubmit, register} = useForm()\n    const [press, isPress] = useState(false);\n    const [message, setMessage] = useState(null);\n    const [client, setClient] = useState(null);\n    const [categories, setCategories] = useState(null);\n\n    useEffect(()=>{\n        let cl = JSON.parse(sessionStorage.getItem(\"client\"));\n        if (!cl){\n            window.location.href = \"/\"\n        }\n        setClient(cl)\n\n        getAllCategories().then(res =>{\n            setCategories(res.data)\n        })\n\n    }, [])\n\n    function submit(data){\n        isPress(true)\n        data.idClient = client.id;\n        data.duree = data.duree+\":00\"\n        ajouterAuction(data).then(res => {\n            setMessage(res.data.message)\n            isPress(false)\n        })\n    }\n\n    if (!categories){\n        return (\n            <div className=\"preloader\">\n                <div className=\"loader\">\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <>\n                <Brand></Brand>\n                <div className=\"row mt-5\">\n                    <div className=\"col-md-4\">\n                        <div className=\"form-wrapper\">\n                            <div className=\"form-title\">\n                                <h3>Ajouter Ench√®re</h3>\n                            </div>\n                            {message ?\n                                <div className=\"alert alert-info\" role=\"alert\">\n                                    {message}\n                                </div> : \"\"\n                            }\n                            <form className=\"w-100\" onSubmit={handleSubmit(submit)}>\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Produit</label>\n                                            <input {...register(\"produit\")} type=\"text\" placeholder=\"Entrer le nom du produit\" />\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Prix min</label>\n                                            <input {...register(\"prixMin\")} type=\"number\" step=\"any\" placeholder=\"Entrer le prix du produit\" />\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Categories</label>\n                                            <select {...register(\"idCategorie\")} className=\"nice-select\">\n                                                {categories.map(cat =>\n                                                    <option value={cat.id} key={cat.id} className=\"option\">{cat.categorie}</option>\n                                                )}\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Durre</label>\n                                            <input {...register(\"duree\")} type=\"time\" placeholder=\"Entrer le nom du produit\" />\n                                        </div>\n                                    </div>\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Description</label>\n                                            <textarea {...register(\"description\")} type=\"text\" placeholder=\"Entrer le nom du produit\" />\n                                        </div>\n                                    </div>\n                                </div>\n                                <button className={!press ? \"account-btn\" : \"disable-btn\"} disabled={press}>\n                                    {press ? <div className=\"spinner-border spinner-border-sm me-2\" role=\"status\" style={{\"color\": \"#494949\"}}> </div> : \"\" }\n                                    enregistrer\n                                </button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}