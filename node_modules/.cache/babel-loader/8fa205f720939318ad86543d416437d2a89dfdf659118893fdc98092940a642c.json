{"ast":null,"code":"import _objectSpread from\"/home/rodolphe/Data/Rojo/sujet/front-office/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/rodolphe/Data/Rojo/sujet/front-office/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Brand from\"../../components/Brand\";import{useForm}from\"react-hook-form\";import{getMouvementSolde,rechargeCompte}from\"../../services/SoldeController\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Rechargement(){var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),mouvement=_useState4[0],setMouvement=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),client=_useState6[0],setClient=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),press=_useState8[0],isPress=_useState8[1];useEffect(function(){var cl=JSON.parse(sessionStorage.getItem(\"client\"));if(!cl){window.location.href=\"/\";}setClient(cl);getMouvementSolde().then(function(res){console.log(res.data);setMouvement(res.data.mouvements);});},[]);function submit(data){isPress(true);data.client=client;data.mouvementSolde=mouvement.find(function(mvm){return 1==mvm.id;});rechargeCompte(data).then(function(res){setMessage(res.data.message);isPress(false);});}function select(e){e.target.classList.toggle(\"open\");}if(!mouvement){return/*#__PURE__*/_jsx(\"div\",{className:\"preloader\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loader\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Brand,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-title\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Recharger compte\"})}),message?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",role:\"alert\",children:message}):\"\",/*#__PURE__*/_jsxs(\"form\",{className:\"w-100\",onSubmit:handleSubmit(submit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-inner\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Montant\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"montant\")),{},{type:\"number\",step:\"any\",placeholder:\"Entrer \"}))]})})}),/*#__PURE__*/_jsxs(\"button\",{className:!press?\"account-btn\":\"disable-btn\",disabled:press,children:[press?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",style:{\"color\":\"#494949\"}}):\"\",\"valider\"]})]})]})})})]});}}","map":{"version":3,"names":["Brand","useForm","getMouvementSolde","rechargeCompte","React","useEffect","useState","Rechargement","handleSubmit","register","message","setMessage","mouvement","setMouvement","client","setClient","press","isPress","cl","JSON","parse","sessionStorage","getItem","window","location","href","then","res","console","log","data","mouvements","submit","mouvementSolde","find","mvm","id","select","e","target","classList","toggle"],"sources":["/home/rodolphe/Data/Rojo/sujet/front-office/src/pages/account/Rechargement.js"],"sourcesContent":["import Brand from \"../../components/Brand\";\nimport {useForm} from \"react-hook-form\";\nimport {getMouvementSolde, rechargeCompte} from \"../../services/SoldeController\";\nimport React, {useEffect, useState} from \"react\";\n\nexport default function Rechargement(){\n\n    const{handleSubmit, register} = useForm()\n    const[message, setMessage] = useState(null);\n    const[mouvement, setMouvement] = useState(null)\n    const[client, setClient] = useState(null);\n    const[press, isPress] = useState(false)\n\n    useEffect(()=>{\n        const cl = JSON.parse(sessionStorage.getItem(\"client\"));\n        if (!cl){\n            window.location.href = \"/\";\n        }\n        setClient(cl)\n        getMouvementSolde().then(res=>{\n            console.log(res.data)\n            setMouvement(res.data.mouvements)\n        })\n    }, [])\n\n    function submit(data){\n        isPress(true);\n        data.client = client;\n        data.mouvementSolde = mouvement.find(mvm => 1 == mvm.id)\n        rechargeCompte(data).then(res => {\n            setMessage(res.data.message)\n            isPress(false)\n        })\n    }\n\n    function select(e){\n        e.target.classList.toggle(\"open\")\n    }\n\n    if (!mouvement){\n        return (\n            <div className=\"preloader\">\n                <div className=\"loader\">\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                    <span></span>\n                </div>\n            </div>\n        )\n    }else{\n        return(\n            <>\n                <Brand></Brand>\n                <div className=\"row mt-5\">\n                    <div className=\"col-md-4\">\n                        <div className=\"form-wrapper\">\n                            <div className=\"form-title\">\n                                <h3>Recharger compte</h3>\n                            </div>\n                            {message ?\n                                <div className=\"alert alert-info\" role=\"alert\">\n                                    {message}\n                                </div> : \"\"\n                            }\n\n                            <form className=\"w-100\" onSubmit={handleSubmit(submit)}>\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Montant</label>\n                                            <input {...register(\"montant\")} type=\"number\" step=\"any\" placeholder=\"Entrer \" />\n                                        </div>\n                                    </div>\n                                    {/*<div className=\"col-12\">\n                                        <div className=\"form-inner\">\n                                            <label>Mouvement</label>\n                                            <select {...register(\"mouvementSolde\")} className=\"nice-select\">\n                                                {mouvement.map(mvm =>\n                                                    <option value={mvm.id} key={mvm.id} className=\"option\">{mvm.nom}</option>\n                                                )}\n                                            </select>\n                                        </div>\n                                    </div>*/}\n                                </div>\n                                <button className={!press ? \"account-btn\" : \"disable-btn\"} disabled={press}>\n                                    {press ? <div className=\"spinner-border spinner-border-sm me-2\" role=\"status\" style={{\"color\": \"#494949\"}}>\n\n                                    </div> : \"\" }\n                                    valider\n                                </button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}